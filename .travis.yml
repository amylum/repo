sudo: required
dist: trusty
services:
- docker
install:
- openssl aes-256-cbc -K $GPG_ENC_KEY -iv $GPG_ENC_IV -in .repo_key.gpg.enc -out .repo_key.gpg
  -d
- 'echo "Prospectus: $GITHUB_CREDS" >> .octoauth.yml'
- gpg --import < .repo_key.gpg
- sudo chown -R 501:501 .
- sudo chown -R 501:501 ~/.gnupg
- sudo chmod 777 .
script: make docker-build
deploy:
  provider: script
  script: make docker-upload || travis_terminate 1
  skip_cleanup: true
  on:
    branch: master
notifications:
  email: false
  slack:
    secure: ZeAmoPGNeFKQLN0VHFXlGVZ+rY8Itmg3K6/F2ug2GJy7/ohK4l3te5okkm/EE+qqMQYFZorky5JmiEYtZfQKGCvBEf5Ag5+bxYRnzeCuvHvmXt4w4MHjq7QhykaTLnwtPDa/AR/qgyOIH/asbOZ0+ntvViCAh29eK4f/5xLcRZJajF/ocaeHy33WwpeMEZnZ8L/JwdoHUA9XZ/Nzq3DrFTkIxZHwB/Sh3rABquIr7kaofEcp7hOt7hMzsA4+nTWuZ5zobCjB1EEl0DHJmXOMxiqeYuJY9kj9uTMsOLXVsNfTVkBM1YjuQGJjC9mX8JWbqL6XpuDKf/nBVN0ignjT+1AZ8T3nrp3yk6YFx0llMHl3RwZsnT9e+06s8kG493rnvz8lnDd/TDwbOFfTLUhzKymBz7do3WAfu3rQLJhbOb8nzt4UbZ1ZfPLcQeNy+heAz0seywV3FZrRjiCg51fCPtvjJuWcGtO4WnembtzG2Rq8R9ACM/laZAXJzp16XiQ9E8CmA4nC1ANYvmaPWFVePaKm9clt/QAK3kYUohnYTtbOMEyyzSoUnHoeUJuEJDiE6yfxBqGj51flpXM5UmPRfO2l8SBw+DyKoSnd6Xr03XNOB7zGx9qB8yY56DCAFkybMaDdcZ8QSHWfMEhzrNsb9hecB9lHP9T6vVHDVouBcss=
env:
  global:
  - secure: ZzDhunxANc84iLm0lrsYhKpr0QDQdBQCU2+MyqZ+9aW+dBWRsqwEbJePmM5C/lcUOae0Jvz84D3Ot3oYDjxN523L2Fq/TSU08FJD06yZkj6EmdWS+71701oVPJTswYj5l8akcJ3bcibPzZ4WMPM5JQT8f0hJG9Uh9jM09ruH8Z+s1ew70Oln2JkptPd1z3owQ51L2MBqiiwNC69aIycDvVF+tlXx23b11ZoUMBhdseIKkMSQmJRAJ76twsGs0yUlal+A/I7yw+43kmBjauBSyUh1HwxLSqhakc5PA1VQ1E5VLh7XcOO/S8l71v+a39xT5mO8dl/NNus4euKUIXoatPA4YFM6EasHiJMoXdFML7D8iPhQgmvrQSbKSASNU+EkMI7giJQkwjo2I1vNjyQtheRNm+NJdzmT0RK/sOVMLpRWKJlUaurmL5R+Gtu2k5WV5Fu8seGmCk3MmLN+CQP+yXnH3vIiQ+L4fZ7WCLAJb9yZ8jCPJPcVSs8Oz4rzYgNDq2F6iD/Fakic2fSilmt81A4oVz91hhKcPZkYXNOQW1K/9et5B08rKKZp0/mCu1GDqlNLad1Cc4sARj5kUximkI7K8gU3r6y0ugLFw1Ojo/XW1ZYAYu3IMLhkmmC21neIjG1+gGuCzV7tlLyt39bcJhnOh6bDMi2bMXWvBEfR5pU=
  - secure: mOS+4A20CeCLX7piJIve26TAnBtjRehpfTzfrYbLT7VG1eA2pc8H9V4QgMMFJYRqa2KsCx2sZaSyVQoSAdYfkyFfzIIiIq9EclWkwv8zl/E36Fhf0Qzulla7SbJ/XyZ1edNjBkCF1GUR87azianZBWj3MdWsgRfoZg+HlPsslfvyz04DEVE+nZfbnG0/GSskZRcYOQ3oaNk+iQFReoych2BwOHAOQcoPjmsPyg7ShVhPb/7aQZS9yZAQcjE6K7IqC2ioMRlyiEvAZYfCbjjoWuvJPXm70hNK8tH80E/Ej6vso38tKCIPu7IQRnRgtDCL57/8Uotgsh2tmiOh3DD47rn4OYrCSN4rzdTDrrF7b24ScvETwfxdPobMtvMIr4GZPgnMoms2Yqoh19iH1aLxUFChSKmK449gJEzxv9i1OrFXMw/3cxlBCIWliPYTQu6liGU+TRDYYoTBkWLsiH0AusdR2xTZOAziinq9Uht1fdxUalzqQ1vM7YG68D/ddBsQj2UpV/JxFg//dwqR1//PpEAk5E+NZYmS6ZWeqJ+2oogBqMcaVVaOJMlBT8GBWMQUd4aQTdGyxadR+TI7D7I2tqWJn0UWbALf4LJBK8MPL8CpmvtbYUh8YXfoiG1x+V36EbVJW2zg5O2h9LTsMhUvStCFWfsaOumLeZEyMUWxFF4=
  - secure: jQoTSxAFLIVblqOijblDcMmoxafQXAhZly45/uu/lz28mcKPslORqR0/2/ZYiXbywTaPHB5StsfpmJhTBzCJye3PB5OmubN/WHtAeSecDxAvl5T+Ufa0a3msiQjk+TcykUj5K/p4XjmVx3bwfgNTsnvvLnr9GeVA+4tfx+WD3o92THZ0GyzHDKRf3f5yclH6A6dX2S2lckb0DyJw6CuhZ9jk8HUahCgUHHgPM0PoRAmC4mf1QkxcH9J4FO0pFW9jEPkY/urqS/FCZDZxOULKxBUNXlBwBcBNSqLqOHtZdz2gG9CI/+EtGP/tibEx+WX15vLAys54vP7bXs0lPmr24jB9ZdeUTbns4LVvUVC/8q6pW9JBJcmOO2B6oz8ahfnAv22YQqFPuFx5dzwPCNGUkeYVilYVoblYBbWKHHDAtPp2jyfgbmgNRWWUcv70Pb8YHi1vbWfaT4gXJJgvKaYyhsiG2aGlOyCFD01smGjkZQUp1JWZDJW4hdxhTmXpIWmL7jdMhEJq52cQWYWi/59STCDeukjz7AFNGyey7Sj2+PuJSbLLrhwrLUcrai0jQLChYSwlER2T/2todRG8blkTag2Bgo1AnudHuQRqV5ac2hLOuGiNXa/Jbs/cAm2WAmpUJmCdzAM0YqeX+8gzqn/hM3h2SozZ6YOUO/kSw6bVli8=
  - secure: PvYv/jxjTm8Sd+pqFaIAp85tO/RjS0DW5NczBF5ypJkTVxXkO0DouS0i/90n45cx6voWF9XOTSkMX8XsnHmZ/pkcsnx+9n6GM9a0g9EyKoIwr0lxXO+is/2vLMORn8q/wehvBYPVE3df4NgiUU9uv670fKz03TtoTMx+GDz+/5zMMZEF1MPdUaFxyD+hHXS3kAiDYJaWrypwDN2ZPsl1FwCW9nc5E8qKtj4kzxfdPxmOYQPGx9O36lM13XfqnDACNCUi23C9VO6fETWEJR/GJMvweVUu2g3+uuLJniYMLFDyVFvRcfjj/QTQRfCPsVnF8yYTiIuE8r3RR2NDwtKr8ooLOiskO907JEzkpecMY6qTUZ+Ade0X0ss6fEQo7c2vpqUftwe4tgXg8hWEIRCHteb1+FPjiwpW+8sEw7qHPfQ9fhSfz2Ma/kvCgO/478QMlfVmFUQLCl8/YXNUuMXAmFwjCWPWzzrcwimV8vflHFpVW0g0EW5JtRA+rJV9xxxMeD7Awg3UKpE2gI3eAEwHFDkGCIv5xVXy6cHBRRTElEUx7q+SLWrX1eVi/zCoS8RaBc3SEl5YDixsm3kfH3n1EVeJJUxA/0Zo6KZuLCnFWuQP2r+MeDT0K3qqf+qrMz1q0/rlAcctAiDd5O7MSEbfQT1X71lqgT1XBKMjWk43XZg=
  - secure: iB6iEM5B7/n0yal7Pa1yqY3w36TvhXd3wguzvZxC1YY2dKY/LJw4Roct+2l4K0abCPqg3nQxTTZzWpTyQoLRowh7cd37P229Uv4YtfPJnzUSjSeQWemgHTYGnKMJ20RRzBWZI9SyIx4TMNECw2qbaMgZ4fFl+SsUQAJDQ+vjX/1/og4GIVrq9zG1sLmWROWv0GdvySbocKHXtIVN63JnFUSZAikpNbiMjqmyBGCWNn85WQffbkdLMB0b5T4CNOKTLlXXkke7VEmr4e3N2WLeX9y3N/IjqgHVVNihZ7sVj1Lx4BlUjKTzqZS/U9eJkLJh5lFmXkQxxoKL4MY6oMXrOuCElskt05U11ezLgloGiWwv9AL4dGFW3PVsPIOXAOpp6jJkccqDvaXPo/3FheBieDUUT28hurS1fRfUPiRbG4SxVu9RNPUmAbDSW03Kf/VLOlLrm+UkHzioRan9OCUsNafH957mw8bJEGdYYW9LDfjWYQ/FZEvwLW44XnoygZUBkMF9KN1fV4I1BbXY9xQXm2zew77gD06sc3LjYKBJ0suupA6D5M+sO6dOk6cxFOiN1DNmPgY8pT/c6+9kEbDHiOuQA9IZQ9PmIJxZPHfENzyRD8C+nobVYspM9P7DnxgdmDZnlUhcMWSHYnNv9idgPbaVE+ca222AhEAkY+V07FI=
